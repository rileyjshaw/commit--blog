{% extends 'base.html' %}

{% block content  %}

  <h1>
    commits-by "{{ blogger.name }}"
  </h1>

  {% if current_user.is_blogger(blogger) %}
    <div class="user-control">
      <p>Hi, {{ current_user.name }}! You can use this area with the blue border to add some commits to your blog.</p>
      <h3>Your recent GitHub pushes:</h3>
      <table>
        {% for event in current_user.get_new_events() %}
          <tr>
            <td>{{ event.repo }}</td>
            <td>{{ event.title }}</td>
            <td><a class="button" href="{{ url_for('blog.add', repo=event.repo, hex=event.sha) }}">Blog&nbsp;this</a></td>
          </tr>
        {% else %}
          <tr><td colspan="3">No new events :(</td></tr>
        {% endfor %}
      </table>

      <h3>... and here's your blog!</h3>
    </div>
  {% endif %}

  {% for post in posts %}

    <article>
      <header>
        <h2>{{ post.get_title() }}</h2>
      </header>
      <p>{{ post.get_body(markdown=True)|safe }}</p>
    </article>

  {% else %}

    <p>No posts by {{ blogger.name }} yet :(</p>

  {% endfor %}

{% endblock %}
